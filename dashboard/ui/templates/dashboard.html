{% extends "base.html" %}

{% block title %}DashBoard Â· Control{% endblock %}

{% block content %}
<!-- Dashboard root: exposes URLs for JS auto-refresh -->
<div id="dashboard-root"
     data-state-url="{{ state_url }}"
     data-kafka-raw-url="{{ kafka_urls.raw }}"
     data-kafka-processed-url="{{ kafka_urls.processed }}">

    <!-- Cards: Mastodon Fetcher + Metrics Processor -->
    <section class="card-grid" data-service-grid>
        {% with fetcher=service_lookup.fetcher processor=service_lookup.processor %}
            {% if fetcher %}
                {% include "partials/dashboard/_service_card.html" with service=fetcher %}
            {% endif %}
            {% if processor %}
                {% include "partials/dashboard/_service_card.html" with service=processor %}
            {% endif %}
        {% endwith %}
    </section>

    <!-- Global console output (flash + runtime events) -->
    {% include "partials/dashboard/_service_console.html" with messages=messages %}
</div>
{% endblock %}


